{"version":3,"sources":["imagesloaded.pkgd.js"],"names":["EventEmitter","indexOfListener","listeners","listener","i","length","alias","name","this","apply","arguments","proto","prototype","exports","originalGlobalValue","getListeners","evt","response","key","events","_getEvents","hasOwnProperty","test","flattenListeners","flatListeners","push","getListenersAsObject","Array","addListener","listenerIsWrapped","once","on","addOnceListener","defineEvent","defineEvents","evts","removeListener","index","splice","off","addListeners","manipulateListeners","removeListeners","remove","value","single","multiple","RegExp","call","removeEvent","type","_events","removeAllListeners","emitEvent","args","_getOnceReturnValue","trigger","emit","slice","setOnceReturnValue","_onceReturnValue","noConflict","define","amd","module","window","getIEEvent","obj","event","target","srcElement","docElem","document","documentElement","bind","addEventListener","fn","attachEvent","handleEvent","unbind","removeEventListener","detachEvent","err","undefined","eventie","factory","require","imagesLoaded","extend","a","b","prop","isArray","objToString","makeArray","ary","ImagesLoaded","elem","options","onAlways","querySelectorAll","elements","getImages","$","jqDeferred","Deferred","_this","setTimeout","check","LoadingImage","img","Background","url","element","Image","jQuery","console","Object","toString","images","addElementImages","nodeName","addImage","background","addElementBackgroundImages","nodeType","elementNodeTypes","childImgs","children","child",1,9,11,"style","getStyle","reURL","matches","exec","backgroundImage","addBackground","getComputedStyle","currentStyle","loadingImage","onProgress","image","message","progress","progressedCount","hasAnyBroken","complete","isLoaded","notify","debug","log","eventName","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","src","method","onload","unbindEvents","onerror","makeJQueryPlugin","callback","instance","promise"],"mappings":"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","file":"imagesloaded.pkgd.js","sourcesContent":["(function(){'use strict';function EventEmitter(){}var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i;}}return-1;}function alias(name){return function aliasClosure(){return this[name].apply(this,arguments);};}proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(typeof evt==='object'){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key];}}}else{response=events[evt]||(events[evt]=[]);}return response;};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener);}return flatListeners;};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners;}return response||listeners;};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==='object';var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false});}}return this;};proto.on=alias('addListener');proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true});};proto.once=alias('addOnceListener');proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this;};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i]);}return this;};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1);}}}return this;};proto.off=alias('removeListener');proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners);};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners);};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==='object'&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==='function'){single.call(this,i,value);}else{multiple.call(this,i,value);}}}}else{i=listeners.length;while(i--){single.call(this,evt,listeners[i]);}}return this;};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==='string'){delete events[evt];}else if(type==='object'){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key];}}}else{delete this._events;}return this;};proto.removeAllListeners=alias('removeEvent');proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===true){this.removeListener(evt,listener.listener);}response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener);}}}}return this;};proto.trigger=alias('emitEvent');proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args);};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this;};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty('_onceReturnValue')){return this._onceReturnValue;}else{return true;}};proto._getEvents=function _getEvents(){return this._events||(this._events={});};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter;};if(typeof define==='function'&&define.amd){define('eventEmitter/EventEmitter',[],function(){return EventEmitter;});}else if(typeof module==='object'&&module.exports){module.exports=EventEmitter;}else{this.EventEmitter=EventEmitter;}}.call(this));(function(window){var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event;}if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false);};}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event);}:function(){var event=getIEEvent(obj);fn.call(obj,event);};obj.attachEvent(\"on\"+type,obj[type+fn]);};}var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false);};}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent(\"on\"+type,obj[type+fn]);try{delete obj[type+fn];}catch(err){obj[type+fn]=undefined;}};}var eventie={bind:bind,unbind:unbind};if(typeof define==='function'&&define.amd){define('eventie/eventie',eventie);}else{window.eventie=eventie;}})(this);(function(window,factory){'use strict';if(typeof define=='function'&&define.amd){define(['eventEmitter/EventEmitter','eventie/eventie'],function(EventEmitter,eventie){return factory(window,EventEmitter,eventie);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('wolfy87-eventemitter'),require('eventie'));}else{window.imagesLoaded=factory(window,window.EventEmitter,window.eventie);}})(window,function factory(window,EventEmitter,eventie){var $=window.jQuery;var console=window.console;function extend(a,b){for(var prop in b){a[prop]=b[prop];}return a;}var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)=='[object Array]';}function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj;}else if(typeof obj.length=='number'){for(var i=0;i<obj.length;i++){ary.push(obj[i]);}}else{ary.push(obj);}return ary;}function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options,onAlways);}if(typeof elem=='string'){elem=document.querySelectorAll(elem);}this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options=='function'){onAlways=options;}else{extend(this.options,options);}if(onAlways){this.on('always',onAlways);}this.getImages();if($){this.jqDeferred=new $.Deferred();}var _this=this;setTimeout(function(){_this.check();});}ImagesLoaded.prototype=new EventEmitter();ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];for(var i=0;i<this.elements.length;i++){var elem=this.elements[i];this.addElementImages(elem);}};ImagesLoaded.prototype.addElementImages=function(elem){if(elem.nodeName=='IMG'){this.addImage(elem);}if(this.options.background===true){this.addElementBackgroundImages(elem);}var nodeType=elem.nodeType;if(!nodeType||!elementNodeTypes[nodeType]){return;}var childImgs=elem.querySelectorAll('img');for(var i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img);}if(typeof this.options.background=='string'){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child);}}};var elementNodeTypes={1:true,9:true,11:true};ImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getStyle(elem);var reURL=/url\\(['\"]*([^'\"\\)]+)['\"]*\\)/gi;var matches=reURL.exec(style.backgroundImage);while(matches!==null){var url=matches&&matches[1];if(url){this.addBackground(url,elem);}matches=reURL.exec(style.backgroundImage);}};var getStyle=window.getComputedStyle||function(elem){return elem.currentStyle;};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage);};ImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background);};ImagesLoaded.prototype.check=function(){var _this=this;this.progressedCount=0;this.hasAnyBroken=false;if(!this.images.length){this.complete();return;}function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message);});}for(var i=0;i<this.images.length;i++){var loadingImage=this.images[i];loadingImage.once('progress',onProgress);loadingImage.check();}};ImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;this.emit('progress',this,image,elem);if(this.jqDeferred&&this.jqDeferred.notify){this.jqDeferred.notify(this,image);}if(this.progressedCount==this.images.length){this.complete();}if(this.options.debug&&console){console.log('progress: '+message,image,elem);}};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;this.emit(eventName,this);this.emit('always',this);if(this.jqDeferred){var jqMethod=this.hasAnyBroken?'reject':'resolve';this.jqDeferred[jqMethod](this);}};function LoadingImage(img){this.img=img;}LoadingImage.prototype=new EventEmitter();LoadingImage.prototype.check=function(){var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}this.proxyImage=new Image();eventie.bind(this.proxyImage,'load',this);eventie.bind(this.proxyImage,'error',this);eventie.bind(this.img,'load',this);eventie.bind(this.img,'error',this);this.proxyImage.src=this.img.src;};LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth!==undefined;};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emit('progress',this,this.img,message);};LoadingImage.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};LoadingImage.prototype.onload=function(){this.confirm(true,'onload');this.unbindEvents();};LoadingImage.prototype.onerror=function(){this.confirm(false,'onerror');this.unbindEvents();};LoadingImage.prototype.unbindEvents=function(){eventie.unbind(this.proxyImage,'load',this);eventie.unbind(this.proxyImage,'error',this);eventie.unbind(this.img,'load',this);eventie.unbind(this.img,'error',this);};function Background(url,element){this.url=url;this.element=element;this.img=new Image();}Background.prototype=new LoadingImage();Background.prototype.check=function(){eventie.bind(this.img,'load',this);eventie.bind(this.img,'error',this);this.img.src=this.url;var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');this.unbindEvents();}};Background.prototype.unbindEvents=function(){eventie.unbind(this.img,'load',this);eventie.unbind(this.img,'error',this);};Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emit('progress',this,this.element,message);};ImagesLoaded.makeJQueryPlugin=function(jQuery){jQuery=jQuery||window.jQuery;if(!jQuery){return;}$=jQuery;$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this));};};ImagesLoaded.makeJQueryPlugin();return ImagesLoaded;});"],"sourceRoot":"/source/"}